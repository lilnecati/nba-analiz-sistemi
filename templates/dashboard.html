<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - NBA Analiz Sistemi</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #0f1419 100%);
            color: #f8fafc;
            min-height: 100vh;
            font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #0f1419 0%, #1a1f3a 100%);
            padding: 24px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
            border-bottom: 1px solid rgba(71, 85, 105, 0.2);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .logo h1 {
            font-size: 26px;
            font-weight: 800;
            background: linear-gradient(135deg, #64748b 0%, #94a3b8 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .username {
            color: #94a3b8;
            font-size: 14px;
            font-weight: 500;
        }

        .btn-logout {
            padding: 10px 24px;
            background: rgba(239, 68, 68, 0.15);
            border: 1.5px solid rgba(239, 68, 68, 0.3);
            border-radius: 10px;
            color: #fca5a5;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            font-weight: 600;
            font-size: 13px;
        }

        .btn-logout:hover {
            background: rgba(239, 68, 68, 0.25);
            transform: translateY(-1px);
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 12px;
            padding: 24px 40px;
            background: rgba(15, 20, 25, 0.6);
            border-bottom: 1px solid rgba(71, 85, 105, 0.15);
        }

        .tab {
            padding: 14px 32px;
            background: rgba(15, 23, 42, 0.6);
            border: 1.5px solid rgba(71, 85, 105, 0.2);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 15px;
            font-weight: 600;
            color: #94a3b8;
        }

        .tab:hover {
            background: rgba(15, 23, 42, 0.9);
            border-color: rgba(100, 116, 139, 0.4);
            color: #cbd5e1;
        }

        .tab.active {
            background: linear-gradient(135deg, #475569 0%, #64748b 100%);
            border-color: transparent;
            color: #fff;
            box-shadow: 0 8px 24px rgba(71, 85, 105, 0.3);
        }

        /* Content */
        .content {
            padding: 40px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Oyuncu Analiz Form */
        .analiz-form {
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.9) 0%, rgba(17, 24, 39, 0.9) 100%);
            padding: 40px;
            border-radius: 20px;
            border: 1.5px solid rgba(71, 85, 105, 0.25);
            margin-bottom: 30px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
        }

        .analiz-form h3 {
            margin-bottom: 30px;
            font-size: 22px;
            font-weight: 700;
            color: #94a3b8;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .analiz-form h3::before {
            content: 'üéØ';
            font-size: 24px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 2.5fr 1fr 1.2fr auto;
            gap: 24px;
            align-items: end;
            margin-bottom: 24px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .form-group label {
            margin-bottom: 12px;
            color: #cbd5e1;
            font-size: 14px;
            font-weight: 600;
            letter-spacing: -0.025em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-group input,
        .form-group select {
            padding: 18px 24px;
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(30, 41, 59, 0.8) 100%);
            border: 2px solid rgba(71, 85, 105, 0.2);
            border-radius: 16px;
            color: #f1f5f9;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #3b82f6;
            background: linear-gradient(135deg, rgba(15, 23, 42, 1) 0%, rgba(30, 41, 59, 0.95) 100%);
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.15), 0 10px 25px -5px rgba(59, 130, 246, 0.1);
            transform: translateY(-2px);
        }

        .form-group input:hover:not(:focus),
        .form-group select:hover:not(:focus) {
            border-color: rgba(100, 116, 139, 0.4);
            transform: translateY(-1px);
            box-shadow: 0 8px 25px -5px rgba(0, 0, 0, 0.15);
        }

        .form-group input::placeholder {
            color: #64748b;
            font-weight: 400;
        }

        /* Autocomplete */
        .autocomplete-container {
            position: relative;
        }

        .autocomplete-list {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            right: 0;
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.95) 100%);
            border: 2px solid rgba(71, 85, 105, 0.2);
            border-radius: 16px;
            max-height: 280px;
            overflow-y: auto;
            z-index: 1000;
            backdrop-filter: blur(20px);
            display: none;
            box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.4);
        }

        .autocomplete-list.show {
            display: block;
            animation: slideDown 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .autocomplete-item {
            padding: 16px 24px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            color: #cbd5e1;
            font-size: 15px;
            font-weight: 500;
            border-bottom: 1px solid rgba(71, 85, 105, 0.1);
        }

        .autocomplete-item:last-child {
            border-bottom: none;
        }

        .autocomplete-item:hover,
        .autocomplete-item.active {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(37, 99, 235, 0.1) 100%);
            color: #f1f5f9;
            transform: translateX(6px);
        }

        .autocomplete-item .highlight {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.4) 0%, rgba(37, 99, 235, 0.3) 100%);
            color: #93c5fd;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 6px;
        }

        .autocomplete-list::-webkit-scrollbar {
            width: 8px;
        }

        .autocomplete-list::-webkit-scrollbar-track {
            background: rgba(15, 23, 42, 0.5);
            border-radius: 0 0 12px 0;
        }

        .autocomplete-list::-webkit-scrollbar-thumb {
            background: rgba(71, 85, 105, 0.5);
            border-radius: 4px;
        }

        .autocomplete-list::-webkit-scrollbar-thumb:hover {
            background: rgba(100, 116, 139, 0.7);
        }

        .btn-analiz {
            padding: 20px 56px;
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            border: none;
            border-radius: 20px;
            color: #fff;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 20px 40px -12px rgba(59, 130, 246, 0.4);
            position: relative;
            overflow: hidden;
        }

        .btn-analiz::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s;
        }

        .btn-analiz:hover {
            transform: translateY(-3px);
            box-shadow: 0 25px 50px -12px rgba(59, 130, 246, 0.6);
            background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
        }

        .btn-analiz:hover::before {
            left: 100%;
        }

        .btn-analiz:active {
            transform: translateY(-1px);
            box-shadow: 0 15px 30px -12px rgba(59, 130, 246, 0.4);
        }

        /* Sonu√ß Kartƒ± */
        .sonuc-card {
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.9) 0%, rgba(17, 24, 39, 0.9) 100%);
            padding: 40px;
            border-radius: 20px;
            border: 1.5px solid rgba(71, 85, 105, 0.25);
            display: none;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
            animation: slideUp 0.4s;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .sonuc-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 35px;
            padding-bottom: 25px;
            border-bottom: 1.5px solid rgba(71, 85, 105, 0.2);
        }

        .oyuncu-info h2 {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #64748b 0%, #94a3b8 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .oyuncu-info p {
            color: #94a3b8;
            font-size: 15px;
            font-weight: 500;
        }

        .risk-badge {
            padding: 14px 28px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .risk-yesil {
            background: rgba(34, 197, 94, 0.2);
            border: 1.5px solid rgba(34, 197, 94, 0.4);
            color: #86efac;
            box-shadow: 0 8px 24px rgba(34, 197, 94, 0.2);
        }

        .risk-sari {
            background: rgba(234, 179, 8, 0.2);
            border: 1.5px solid rgba(234, 179, 8, 0.4);
            color: #fde047;
            box-shadow: 0 8px 24px rgba(234, 179, 8, 0.2);
        }

        .risk-kirmizi {
            background: rgba(239, 68, 68, 0.2);
            border: 1.5px solid rgba(239, 68, 68, 0.4);
            color: #fca5a5;
            box-shadow: 0 8px 24px rgba(239, 68, 68, 0.2);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        /* Ma√ß Analizi √ñzel Grid'leri */
        .mac-stats-grid {
            display: flex;
            flex-direction: column;
            gap: 24px;
            margin-bottom: 30px;
        }

        .ana-tahminler {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .detay-analizler {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 16px;
        }

        .takim-detaylar {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .takim-kart {
            background: rgba(15, 23, 42, 0.4);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(71, 85, 105, 0.2);
        }

        .takim-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
        }

        .stat-box {
            background: rgba(15, 23, 42, 0.6);
            padding: 24px;
            border-radius: 16px;
            border: 1.5px solid rgba(71, 85, 105, 0.2);
            transition: all 0.3s;
        }

        .stat-box:hover {
            border-color: rgba(100, 116, 139, 0.4);
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(71, 85, 105, 0.25);
        }

        .stat-label {
            color: #94a3b8;
            font-size: 12px;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 800;
            background: linear-gradient(135deg, #64748b 0%, #94a3b8 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Oyuncu Detay Grid */
        .oyuncu-detay-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
            padding: 25px;
            background: rgba(71, 85, 105, 0.08);
            border-radius: 16px;
            border: 1px solid rgba(71, 85, 105, 0.15);
        }

        .detay-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 12px;
            border: 1px solid rgba(71, 85, 105, 0.2);
            transition: all 0.3s;
        }

        .detay-item:hover {
            background: rgba(15, 23, 42, 0.7);
            border-color: rgba(100, 116, 139, 0.3);
        }

        .detay-icon {
            font-size: 24px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(71, 85, 105, 0.2);
            border-radius: 10px;
        }

        .detay-label {
            font-size: 11px;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .detay-value {
            font-size: 18px;
            font-weight: 700;
            color: #cbd5e1;
        }

        .loading {
            text-align: center;
            padding: 80px;
            display: none;
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(30, 41, 59, 0.8) 100%);
            border-radius: 24px;
            border: 1px solid rgba(148, 163, 184, 0.1);
            backdrop-filter: blur(20px);
        }

        .spinner {
            border: 4px solid rgba(59, 130, 246, 0.1);
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 24px;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading p {
            color: #cbd5e1;
            font-size: 18px;
            font-weight: 600;
            letter-spacing: -0.025em;
        }

        .coming-soon {
            text-align: center;
            padding: 80px;
            color: #94a3b8;
        }

        .coming-soon h2 {
            font-size: 36px;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #64748b 0%, #94a3b8 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .form-row {
                grid-template-columns: 2fr 1fr auto;
                gap: 20px;
            }
            
            .content {
                padding: 30px;
            }
        }

        @media (max-width: 1024px) {
            .form-row {
                grid-template-columns: 1fr !important;
                gap: 18px !important;
            }
            
            .btn-analiz {
                grid-column: 1 / -1;
                padding: 18px 48px;
                font-size: 15px;
            }
            
            .header {
                padding: 20px 30px;
            }
            
            .content {
                padding: 25px;
            }
        }

        @media (max-width: 768px) {
            /* Mobil i√ßin t√ºm grid'leri zorla dikey yap */
            * {
                max-width: 100vw !important;
                box-sizing: border-box !important;
            }
            
            /* T√ºm form grid'lerini zorla tek s√ºtun yap */
            .form-row,
            .analiz-form .form-row,
            div[style*="grid-template-columns"] {
                grid-template-columns: 1fr !important;
                display: grid !important;
                gap: 16px !important;
            }
            
            .form-row {
                grid-template-columns: 1fr !important;
                gap: 16px !important;
                display: grid !important;
            }
            
            .header {
                padding: 16px 20px;
                flex-direction: column;
                gap: 15px;
            }
            
            .logo h1 {
                font-size: 22px;
            }
            
            .content {
                padding: 20px;
            }
            
            .tabs {
                padding: 15px 20px;
                gap: 8px;
                flex-wrap: wrap;
            }
            
            .tab {
                padding: 12px 24px;
                font-size: 14px;
                flex: 1;
                min-width: 120px;
            }
            
            .analiz-form {
                padding: 24px;
                border-radius: 20px;
            }
            
            .sonuc-card {
                padding: 24px;
                border-radius: 20px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            /* Ma√ß Analizi Mobil D√ºzeni - FORCED */
            .ana-tahminler {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 16px !important;
            }
            
            .detay-analizler {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 12px !important;
            }
            
            .takim-detaylar {
                grid-template-columns: 1fr !important;
                gap: 20px !important;
            }
            
            .takim-stats {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 10px !important;
            }
            
            .takim-kart {
                padding: 16px !important;
            }
            
            .form-group input,
            .form-group select {
                padding: 16px 20px;
                font-size: 16px; /* Prevent zoom on iOS */
            }
            
            .btn-analiz {
                padding: 16px 40px;
                font-size: 14px;
                border-radius: 16px;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 12px 16px;
            }
            
            .content {
                padding: 16px;
            }
            
            .tabs {
                padding: 12px 16px;
            }
            
            .analiz-form {
                padding: 20px;
            }
            
            .sonuc-card {
                padding: 20px;
            }
            
            /* K√º√ß√ºk mobil i√ßin tek s√ºtun - FORCED */
            .ana-tahminler {
                grid-template-columns: 1fr !important;
                gap: 12px !important;
            }
            
            .detay-analizler {
                grid-template-columns: 1fr !important;
                gap: 10px !important;
            }
            
            .takim-stats {
                grid-template-columns: 1fr !important;
                gap: 8px !important;
            }
            
            .takim-kart {
                padding: 12px !important;
            }
            
            .stat-box {
                padding: 16px !important;
            }
            
            .form-group input,
            .form-group select {
                padding: 14px 18px;
            }
            
            .btn-analiz {
                padding: 14px 32px;
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="logo">
            <h1>üèÄ NBA ANALƒ∞Z Sƒ∞STEMƒ∞</h1>
        </div>
        <div class="user-info">
            <span class="username">üë§ {{ username }}</span>
            <a href="/logout" class="btn-logout">√áƒ±kƒ±≈ü</a>
        </div>
    </div>

    <!-- Tabs -->
    <div class="tabs">
        <div class="tab active" onclick="switchTab('oyuncular')">üèÄ Oyuncular</div>
        <div class="tab" onclick="switchTab('maclar')">‚öΩ Ma√ßlar</div>
    </div>

    <!-- Content -->
    <div class="content">
        <!-- Oyuncular Tab -->
        <div id="oyuncular" class="tab-content active">
            <div class="analiz-form">
                <h3>Oyuncu Baraj Analizi</h3>
                <form id="analizForm">
                    <div class="form-row">
                        <div class="form-group autocomplete-container">
                            <label>üéØ Oyuncu Adƒ±</label>
                            <input type="text" id="oyuncu_isim" placeholder="√ñrn: LeBron James, Tyrese Maxey..." required autocomplete="off">
                            <div class="autocomplete-list" id="autocompleteList"></div>
                        </div>
                        <div class="form-group">
                            <label>üìä Baraj Limiti</label>
                            <input type="number" id="baraj" placeholder="40" value="40" required>
                        </div>
                        <div class="form-group">
                            <label>üìà Analiz Tipi</label>
                            <select id="analiz_tipi">
                                <option value="SAR">S+A+R (Toplam)</option>
                                <option value="PTS">Sadece Sayƒ±</option>
                                <option value="AST">Sadece Asist</option>
                                <option value="REB">Sadece Ribaund</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>üè† Ma√ß Yeri</label>
                            <select id="ev_deplasman">
                                <option value="Bilinmiyor">Bilinmiyor</option>
                                <option value="Ev">üè† Ev Ma√ßƒ±</option>
                                <option value="Deplasman">‚úàÔ∏è Deplasman</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>üé≤ Ev Sahibi Oranƒ± (Opsiyonel)</label>
                            <input type="number" step="0.01" id="ev_orani" placeholder="1.22">
                            <small style="color: #64748b; font-size: 11px; margin-top: 4px;">Ev takƒ±mƒ±nƒ±n ma√ß oranƒ±</small>
                        </div>
                        <div class="form-group">
                            <label>üé≤ Deplasman Oranƒ± (Opsiyonel)</label>
                            <input type="number" step="0.01" id="dep_orani" placeholder="2.85">
                            <small style="color: #64748b; font-size: 11px; margin-top: 4px;">Deplasman takƒ±mƒ±nƒ±n oranƒ±</small>
                        </div>
                        <div class="form-group">
                            <button type="submit" class="btn-analiz">Analiz Et</button>
                        </div>
                    </div>
                </form>
            </div>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Analiz yapƒ±lƒ±yor, l√ºtfen bekleyin...</p>
            </div>

            <div class="sonuc-card" id="sonucCard">
                <div class="sonuc-header">
                    <div class="oyuncu-info">
                        <h2 id="oyuncuAdi"></h2>
                        <p id="oyuncuDetay"></p>
                        <p id="takimBilgi" style="margin-top: 5px; color: #64748b; font-size: 14px; font-weight: 600;"></p>
                    </div>
                    <div class="risk-badge" id="riskBadge"></div>
                </div>

                <!-- Oyuncu Detay Bilgileri -->
                <div class="oyuncu-detay-grid">
                    <div class="detay-item">
                        <span class="detay-icon">üéÆ</span>
                        <div>
                            <div class="detay-label">Toplam Ma√ß</div>
                            <div class="detay-value" id="toplamMac">-</div>
                        </div>
                    </div>
                    <div class="detay-item">
                        <span class="detay-icon">‚úÖ</span>
                        <div>
                            <div class="detay-label">Barajƒ± Ge√ßen Ma√ß</div>
                            <div class="detay-value" id="basariliMac">-</div>
                        </div>
                    </div>
                    <div class="detay-item">
                        <span class="detay-icon">‚è±Ô∏è</span>
                        <div>
                            <div class="detay-label">Ortalama Dakika</div>
                            <div class="detay-value" id="ortalamaDakika">-</div>
                        </div>
                    </div>
                    <div class="detay-item">
                        <span class="detay-icon">üìÖ</span>
                        <div>
                            <div class="detay-label">Sezon</div>
                            <div class="detay-value" id="sezonBilgi">-</div>
                        </div>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-label">Sezon Ortalamasƒ±</div>
                        <div class="stat-value" id="sezonOrt"></div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Son 5 Ma√ß Ort.</div>
                        <div class="stat-value" id="son5Ort"></div>
                    </div>
                    <div class="stat-box" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.1) 100%); border: 1.5px solid rgba(16, 185, 129, 0.3);">
                        <div class="stat-label">üéØ Final Tahmin</div>
                        <div class="stat-value" id="finalTahmin" style="color: #10b981;"></div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Baraj Limiti</div>
                        <div class="stat-value" id="barajLimit"></div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Sezon Ba≈üarƒ±sƒ±</div>
                        <div class="stat-value" id="basariOran"></div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Son 5 Ma√ß Ba≈üarƒ±sƒ±</div>
                        <div class="stat-value" id="son5Basari"></div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">G√ºven Skoru</div>
                        <div class="stat-value" id="guvenSkor"></div>
                    </div>
                </div>
                
                <!-- Yeni: Geli≈ümi≈ü Analiz Detaylarƒ± -->
                <div class="stats-grid" style="margin-top: 20px;">
                    <div class="stat-box">
                        <div class="stat-label">üè† Ev Ortalamasƒ±</div>
                        <div class="stat-value" id="evOrt"></div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">‚úàÔ∏è Deplasman Ort.</div>
                        <div class="stat-value" id="depOrt"></div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">‚ö° Takƒ±m Pace</div>
                        <div class="stat-value" id="takimPace"></div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">üî• Tempo Bonusu</div>
                        <div class="stat-value" id="tempoBonus"></div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">üìä Tutarlƒ±lƒ±k (Std)</div>
                        <div class="stat-value" id="stdSapmaOyuncu"></div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">üí° √ñnerilen Baraj</div>
                        <div class="stat-value" id="onerilenBaraj"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ma√ßlar Tab -->
        <div id="maclar" class="tab-content">
            <div class="analiz-form">
                <h3>Ma√ß Alt/√úst Analizi</h3>
                <form id="macAnalizForm">
                    <div class="form-row" style="grid-template-columns: 1.5fr 1.5fr 1fr auto;">
                        <div class="form-group autocomplete-container">
                            <label>üè† Ev Sahibi Takƒ±m</label>
                            <input type="text" id="ev_takim" placeholder="√ñrn: Lakers, Warriors..." required autocomplete="off">
                            <div class="autocomplete-list" id="evTakimList"></div>
                        </div>
                        <div class="form-group autocomplete-container">
                            <label>‚úàÔ∏è Deplasman Takƒ±mƒ±</label>
                            <input type="text" id="dep_takim" placeholder="√ñrn: Celtics, Heat..." required autocomplete="off">
                            <div class="autocomplete-list" id="depTakimList"></div>
                        </div>
                        <div class="form-group">
                            <label>üìä Baraj (Opsiyonel)</label>
                            <input type="number" step="0.5" id="mac_baraj" placeholder="220.5">
                            <small style="color: #64748b; font-size: 11px; margin-top: 4px;">Bo≈ü bƒ±rakƒ±rsanƒ±z sistem √∂nerir</small>
                        </div>
                        <div class="form-group">
                            <button type="submit" class="btn-analiz">Analiz Et</button>
                        </div>
                    </div>
                </form>
            </div>

            <div class="loading" id="macLoading">
                <div class="spinner"></div>
                <p>Ma√ß analizi yapƒ±lƒ±yor, l√ºtfen bekleyin...</p>
            </div>

            <div class="sonuc-card" id="macSonucCard">
                <div class="sonuc-header">
                    <div class="oyuncu-info">
                        <h2 id="macBaslik"></h2>
                        <p id="macDetay"></p>
                    </div>
                    <div class="risk-badge" id="macRiskBadge"></div>
                </div>

                <!-- Ma√ß Tahmin Bilgileri -->
                <div class="mac-stats-grid">
                    <!-- Ana Tahminler (Her zaman √ºstte) -->
                    <div class="ana-tahminler">
                        <div class="stat-box" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.1) 100%); border: 1.5px solid rgba(16, 185, 129, 0.3);">
                            <div class="stat-label">üéØ Toplam Tahmin</div>
                            <div class="stat-value" id="toplamTahmin" style="color: #10b981; font-size: 36px;"></div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">ƒ∞lk Yarƒ± Tahmini</div>
                            <div class="stat-value" id="ilkYariTahmin"></div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Ma√ß Temposu</div>
                            <div class="stat-value" id="macTempo"></div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Standart Sapma</div>
                            <div class="stat-value" id="stdSapma"></div>
                        </div>
                    </div>
                    
                    <!-- Detay Analizler (Mobilde alt alta) -->
                    <div class="detay-analizler">
                        <div class="stat-box">
                            <div class="stat-label">üìä Baz Toplam</div>
                            <div class="stat-value" id="bazToplam"></div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">‚ö° Tempo Etkisi</div>
                            <div class="stat-value" id="tempoEtkisi"></div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">üéØ Verimlilik Etkisi</div>
                            <div class="stat-value" id="verimllikEtkisi"></div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">üî• Form Etkisi</div>
                            <div class="stat-value" id="formEtkisi"></div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">üèÄ Shooting Etkisi</div>
                            <div class="stat-value" id="shootingEtkisi"></div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">üõ°Ô∏è Savunma Cezasƒ±</div>
                            <div class="stat-value" id="savunmaCezasi"></div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">üè† Ev Avantajƒ±</div>
                            <div class="stat-value" id="evAvantaji"></div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">üîÑ Regresyon Etkisi</div>
                            <div class="stat-value" id="regresyonEtkisi"></div>
                        </div>
                    </div>
                </div>

                <!-- Takƒ±m Detay Bilgileri -->
                <div style="margin-top: 30px;">
                    <h3 style="color: #94a3b8; font-size: 18px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <span>üìä</span> Takƒ±m Performans Detaylarƒ±
                    </h3>
                    <div class="takim-detaylar">
                        <!-- Ev Takƒ±mƒ± -->
                        <div class="takim-kart">
                            <h4 style="color: #10b981; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                                <span>üè†</span> <span id="evTakimAdi">Ev Takƒ±mƒ±</span>
                            </h4>
                            <div class="takim-stats">
                                <div class="stat-box" style="padding: 12px;">
                                    <div class="stat-label" style="font-size: 12px;">Sezon Ort.</div>
                                    <div class="stat-value" id="evSezonOrt" style="font-size: 18px;"></div>
                                </div>
                                <div class="stat-box" style="padding: 12px;">
                                    <div class="stat-label" style="font-size: 12px;">Son 5 Ort.</div>
                                    <div class="stat-value" id="evSon5Ort" style="font-size: 18px;"></div>
                                </div>
                                <div class="stat-box" style="padding: 12px;">
                                    <div class="stat-label" style="font-size: 12px;">Off Rating</div>
                                    <div class="stat-value" id="evOffRating" style="font-size: 18px;"></div>
                                </div>
                                <div class="stat-box" style="padding: 12px;">
                                    <div class="stat-label" style="font-size: 12px;">Def Rating</div>
                                    <div class="stat-value" id="evDefRating" style="font-size: 18px;"></div>
                                </div>
                                <div class="stat-box" style="padding: 12px;">
                                    <div class="stat-label" style="font-size: 12px;">FG%</div>
                                    <div class="stat-value" id="evFgPct" style="font-size: 18px;"></div>
                                </div>
                                <div class="stat-box" style="padding: 12px;">
                                    <div class="stat-label" style="font-size: 12px;">3P%</div>
                                    <div class="stat-value" id="ev3pPct" style="font-size: 18px;"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Deplasman Takƒ±mƒ± -->
                        <div class="takim-kart">
                            <h4 style="color: #f59e0b; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                                <span>‚úàÔ∏è</span> <span id="depTakimAdi">Deplasman Takƒ±mƒ±</span>
                            </h4>
                            <div class="takim-stats">
                                <div class="stat-box" style="padding: 12px;">
                                    <div class="stat-label" style="font-size: 12px;">Sezon Ort.</div>
                                    <div class="stat-value" id="depSezonOrt" style="font-size: 18px;"></div>
                                </div>
                                <div class="stat-box" style="padding: 12px;">
                                    <div class="stat-label" style="font-size: 12px;">Son 5 Ort.</div>
                                    <div class="stat-value" id="depSon5Ort" style="font-size: 18px;"></div>
                                </div>
                                <div class="stat-box" style="padding: 12px;">
                                    <div class="stat-label" style="font-size: 12px;">Off Rating</div>
                                    <div class="stat-value" id="depOffRating" style="font-size: 18px;"></div>
                                </div>
                                <div class="stat-box" style="padding: 12px;">
                                    <div class="stat-label" style="font-size: 12px;">Def Rating</div>
                                    <div class="stat-value" id="depDefRating" style="font-size: 18px;"></div>
                                </div>
                                <div class="stat-box" style="padding: 12px;">
                                    <div class="stat-label" style="font-size: 12px;">FG%</div>
                                    <div class="stat-value" id="depFgPct" style="font-size: 18px;"></div>
                                </div>
                                <div class="stat-box" style="padding: 12px;">
                                    <div class="stat-label" style="font-size: 12px;">3P%</div>
                                    <div class="stat-value" id="dep3pPct" style="font-size: 18px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Baraj Analiz Sonucu -->
                <div id="barajSonucContainer" style="margin-top: 30px; padding: 30px; background: rgba(15, 23, 42, 0.6); border-radius: 16px; border: 1.5px solid rgba(71, 85, 105, 0.2);">
                    <h3 style="color: #94a3b8; font-size: 18px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <span>üéØ</span> Baraj Analiz Sonucu
                    </h3>
                    <div id="barajSonucIcerik"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // NBA Takƒ±mlarƒ± listesi
        // Takƒ±m listesi - JSON'dan y√ºklenecek
        let takimlar = [];

        // Oyuncu listesi
        const oyuncular = [
            "TYRESE MAXEY", "SHAI GILGEOUS-ALEXANDER", "GIANNIS ANTETOKOUNMPO",
            "DONOVAN MITCHELL", "AUSTIN REAVES", "DEVIN BOOKER", "LAURI MARKKANEN",
            "JALEN BRUNSON", "JAYLEN BROWN", "ZACH LAVINE", "JULIUS RANDLE",
            "STEPHEN CURRY", "PASCAL SIAKAM", "VICTOR WEMBANYAMA", "CADE CUNNINGHAM",
            "DENI AVDIJA", "KAWHI LEONARD", "NIKOLA JOKIC", "KEVIN DURANT",
            "LAMELO BALL", "JAMES HARDEN", "JOSH GIDDEY", "PAOLO BANCHERO",
            "JAMAL MURRAY", "KEYONTE GEORGE", "ALPEREN SENGUN", "MICHAEL PORTER JR.",
            "FRANZ WAGNER", "MILES BRIDGES", "CAM THOMAS", "BRANDON INGRAM",
            "DEMAR DEROZAN", "SCOTTIE BARNES", "RJ BARRETT", "JALEN JOHNSON",
            "AARON GORDON", "JERAMI GRANT", "JA MORANT", "BAM ADEBAYO",
            "EVAN MOBLEY", "KARL-ANTHONY TOWNS", "STEPHON CASTLE", "NIKOLA VUCEVIC",
            "KELLY OUBRE JR.", "ALEX SARR", "JIMMY BUTLER", "AMEN THOMPSON",
            "QUENTIN GRIMES", "OG ANUNOBY", "SHAEDON SHARPE", "LEBRON JAMES",
            "ANTHONY DAVIS", "LUKA DONCIC", "JAYSON TATUM", "JOEL EMBIID",
            "DAMIAN LILLARD", "ANTHONY EDWARDS", "TRAE YOUNG"
        ];

        let currentFocus = -1;

        // Autocomplete fonksiyonu
        function setupAutocomplete() {
            const input = document.getElementById('oyuncu_isim');
            const list = document.getElementById('autocompleteList');

            input.addEventListener('input', function() {
                const value = this.value.toUpperCase();
                list.innerHTML = '';
                currentFocus = -1;

                if (!value) {
                    list.classList.remove('show');
                    return;
                }

                // E≈üle≈üen oyuncularƒ± filtrele
                const matches = oyuncular.filter(oyuncu => 
                    oyuncu.includes(value)
                ).slice(0, 10); // ƒ∞lk 10 sonu√ß

                if (matches.length === 0) {
                    list.classList.remove('show');
                    return;
                }

                // Sonu√ßlarƒ± g√∂ster
                matches.forEach((oyuncu, index) => {
                    const item = document.createElement('div');
                    item.className = 'autocomplete-item';
                    
                    // E≈üle≈üen kƒ±smƒ± vurgula
                    const startIndex = oyuncu.indexOf(value);
                    const beforeMatch = oyuncu.substring(0, startIndex);
                    const match = oyuncu.substring(startIndex, startIndex + value.length);
                    const afterMatch = oyuncu.substring(startIndex + value.length);
                    
                    item.innerHTML = `${beforeMatch}<span class="highlight">${match}</span>${afterMatch}`;
                    
                    item.addEventListener('click', function() {
                        input.value = oyuncu;
                        list.classList.remove('show');
                    });
                    
                    list.appendChild(item);
                });

                list.classList.add('show');
            });

            // Klavye navigasyonu
            input.addEventListener('keydown', function(e) {
                const items = list.getElementsByClassName('autocomplete-item');
                
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    currentFocus++;
                    addActive(items);
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    currentFocus--;
                    addActive(items);
                } else if (e.key === 'Enter') {
                    if (currentFocus > -1 && items[currentFocus]) {
                        e.preventDefault();
                        items[currentFocus].click();
                    }
                } else if (e.key === 'Escape') {
                    list.classList.remove('show');
                }
            });

            function addActive(items) {
                if (!items) return false;
                removeActive(items);
                
                if (currentFocus >= items.length) currentFocus = 0;
                if (currentFocus < 0) currentFocus = items.length - 1;
                
                items[currentFocus].classList.add('active');
                items[currentFocus].scrollIntoView({ block: 'nearest' });
            }

            function removeActive(items) {
                for (let i = 0; i < items.length; i++) {
                    items[i].classList.remove('active');
                }
            }

            // Dƒ±≈üarƒ± tƒ±klandƒ±ƒüƒ±nda kapat
            document.addEventListener('click', function(e) {
                if (!input.contains(e.target) && !list.contains(e.target)) {
                    list.classList.remove('show');
                }
            });
        }

        // Takƒ±m autocomplete fonksiyonu
        function setupTakimAutocomplete(inputId, listId) {
            const input = document.getElementById(inputId);
            const list = document.getElementById(listId);
            let currentFocus = -1;

            input.addEventListener('input', function() {
                const value = this.value.toLowerCase();
                list.innerHTML = '';
                currentFocus = -1;

                if (!value) {
                    list.classList.remove('show');
                    return;
                }

                // E≈üle≈üen takƒ±mlarƒ± filtrele
                const matches = takimlar.filter(takim => 
                    takim.toLowerCase().includes(value)
                ).slice(0, 10);

                if (matches.length === 0) {
                    list.classList.remove('show');
                    return;
                }

                // Sonu√ßlarƒ± g√∂ster
                matches.forEach((takim, index) => {
                    const item = document.createElement('div');
                    item.className = 'autocomplete-item';
                    
                    // E≈üle≈üen kƒ±smƒ± vurgula
                    const lowerTakim = takim.toLowerCase();
                    const startIndex = lowerTakim.indexOf(value);
                    const beforeMatch = takim.substring(0, startIndex);
                    const match = takim.substring(startIndex, startIndex + value.length);
                    const afterMatch = takim.substring(startIndex + value.length);
                    
                    item.innerHTML = `${beforeMatch}<span class="highlight">${match}</span>${afterMatch}`;
                    
                    item.addEventListener('click', function() {
                        input.value = takim;
                        list.classList.remove('show');
                    });
                    
                    list.appendChild(item);
                });

                list.classList.add('show');
            });

            // Klavye navigasyonu
            input.addEventListener('keydown', function(e) {
                const items = list.getElementsByClassName('autocomplete-item');
                
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    currentFocus++;
                    addActive(items);
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    currentFocus--;
                    addActive(items);
                } else if (e.key === 'Enter') {
                    if (currentFocus > -1 && items[currentFocus]) {
                        e.preventDefault();
                        items[currentFocus].click();
                    }
                } else if (e.key === 'Escape') {
                    list.classList.remove('show');
                }
            });

            function addActive(items) {
                if (!items) return false;
                removeActive(items);
                
                if (currentFocus >= items.length) currentFocus = 0;
                if (currentFocus < 0) currentFocus = items.length - 1;
                
                items[currentFocus].classList.add('active');
                items[currentFocus].scrollIntoView({ block: 'nearest' });
            }

            function removeActive(items) {
                for (let i = 0; i < items.length; i++) {
                    items[i].classList.remove('active');
                }
            }

            // Dƒ±≈üarƒ± tƒ±klandƒ±ƒüƒ±nda kapat
            document.addEventListener('click', function(e) {
                if (!input.contains(e.target) && !list.contains(e.target)) {
                    list.classList.remove('show');
                }
            });
        }

        // Takƒ±m listesini y√ºkle
        async function loadTakimlar() {
            try {
                const response = await fetch('/takimlar.json');
                takimlar = await response.json();
                console.log(`‚úÖ ${takimlar.length} takƒ±m ismi y√ºklendi`);
            } catch (error) {
                console.error('‚ùå Takƒ±m listesi y√ºklenemedi:', error);
                // Fallback: Temel takƒ±m isimleri
                takimlar = [
                    "Atlanta Hawks", "Boston Celtics", "Brooklyn Nets", "Charlotte Hornets",
                    "Chicago Bulls", "Cleveland Cavaliers", "Dallas Mavericks", "Denver Nuggets",
                    "Detroit Pistons", "Golden State Warriors", "Houston Rockets", "Indiana Pacers",
                    "Los Angeles Clippers", "Los Angeles Lakers", "Memphis Grizzlies", "Miami Heat",
                    "Milwaukee Bucks", "Minnesota Timberwolves", "New Orleans Pelicans", "New York Knicks",
                    "Oklahoma City Thunder", "Orlando Magic", "Philadelphia 76ers", "Phoenix Suns",
                    "Portland Trail Blazers", "Sacramento Kings", "San Antonio Spurs", "Toronto Raptors",
                    "Utah Jazz", "Washington Wizards"
                ];
            }
        }

        // Sayfa y√ºklendiƒüinde autocomplete'leri ba≈ülat
        (async function() {
            await loadTakimlar();
            setupAutocomplete();
            setupTakimAutocomplete('ev_takim', 'evTakimList');
            setupTakimAutocomplete('dep_takim', 'depTakimList');
        })();

        function switchTab(tabName) {
            // Tab butonlarƒ±nƒ± g√ºncelle
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // Tab i√ßeriklerini g√ºncelle
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
        }

        document.getElementById('analizForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const oyuncu_isim = document.getElementById('oyuncu_isim').value;
            const baraj = document.getElementById('baraj').value;
            const analiz_tipi = document.getElementById('analiz_tipi').value;
            const ev_deplasman = document.getElementById('ev_deplasman').value;
            const ev_orani = document.getElementById('ev_orani').value;
            const dep_orani = document.getElementById('dep_orani').value;
            
            // Loading g√∂ster
            document.getElementById('loading').style.display = 'block';
            document.getElementById('sonucCard').style.display = 'none';
            
            try {
                const response = await fetch('/api/oyuncu-analiz', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        oyuncu_isim,
                        baraj,
                        analiz_tipi,
                        ev_deplasman,
                        ev_orani: ev_orani || null,
                        dep_orani: dep_orani || null
                    })
                });
                
                const result = await response.json();
                
                document.getElementById('loading').style.display = 'none';
                
                if (result.success) {
                    const data = result.data;
                    
                    // Sonu√ßlarƒ± g√∂ster
                    document.getElementById('oyuncuAdi').textContent = data.oyuncu;
                    
                    let analizTipiText = '';
                    if (analiz_tipi === 'SAR') analizTipiText = 'Sayƒ± + Asist + Ribaund';
                    else if (analiz_tipi === 'PTS') analizTipiText = 'Sadece Sayƒ±';
                    else if (analiz_tipi === 'AST') analizTipiText = 'Sadece Asist';
                    else if (analiz_tipi === 'REB') analizTipiText = 'Sadece Ribaund';
                    
                    document.getElementById('oyuncuDetay').textContent = analizTipiText + ' Analizi';
                    
                    // Takƒ±m ve pozisyon bilgisi
                    const takimText = data.takim && data.takim !== 'N/A' ? data.takim : '';
                    const pozisyonText = data.pozisyon && data.pozisyon !== 'N/A' ? data.pozisyon : '';
                    
                    if (takimText && pozisyonText) {
                        document.getElementById('takimBilgi').textContent = `üèÄ ${takimText} ‚Ä¢ ${pozisyonText}`;
                    } else if (takimText) {
                        document.getElementById('takimBilgi').textContent = `üèÄ ${takimText}`;
                    } else {
                        document.getElementById('takimBilgi').textContent = '';
                    }
                    
                    // Risk badge
                    const riskBadge = document.getElementById('riskBadge');
                    riskBadge.textContent = data.risk;
                    
                    if (data.risk.includes('G√úVENLƒ∞')) {
                        riskBadge.className = 'risk-badge risk-yesil';
                    } else if (data.risk.includes('Rƒ∞SK')) {
                        riskBadge.className = 'risk-badge risk-sari';
                    } else {
                        riskBadge.className = 'risk-badge risk-kirmizi';
                    }
                    
                    // Oyuncu detay bilgileri
                    document.getElementById('toplamMac').textContent = data.toplam_mac + ' ma√ß';
                    document.getElementById('basariliMac').textContent = data.basarili_mac + ' ma√ß';
                    document.getElementById('ortalamaDakika').textContent = data.ortalama_dakika.toFixed(1) + ' dk';
                    document.getElementById('sezonBilgi').textContent = data.sezon;
                    
                    // ƒ∞statistikler
                    document.getElementById('sezonOrt').textContent = data.sezon_ortalama.toFixed(1);
                    document.getElementById('son5Ort').textContent = data.son_5_ortalama.toFixed(1);
                    document.getElementById('finalTahmin').textContent = data.final_tahmin.toFixed(1);
                    document.getElementById('barajLimit').textContent = data.baraj + '+';
                    document.getElementById('basariOran').textContent = '%' + data.basari_orani.toFixed(0) + ' (' + data.basarili_mac + '/' + data.toplam_mac + ')';
                    document.getElementById('son5Basari').textContent = '%' + data.son_5_basari_orani.toFixed(0) + ' (' + data.son_5_basarili + '/' + data.son_5_toplam + ')';
                    document.getElementById('guvenSkor').textContent = '%' + data.guven_skoru;
                    
                    // Geli≈ümi≈ü analiz detaylarƒ±
                    document.getElementById('evOrt').textContent = data.ev_ortalama.toFixed(1);
                    document.getElementById('depOrt').textContent = data.deplasman_ortalama.toFixed(1);
                    document.getElementById('takimPace').textContent = data.takim_pace ? data.takim_pace.toFixed(1) : 'N/A';
                    document.getElementById('tempoBonus').textContent = data.tempo_bonus ? '+' + data.tempo_bonus.toFixed(1) : '0.0';
                    document.getElementById('stdSapmaOyuncu').textContent = '¬±' + data.std_sapma.toFixed(1);
                    document.getElementById('onerilenBaraj').textContent = data.onerilen_baraj.toFixed(1) + '+';
                    
                    document.getElementById('sonucCard').style.display = 'block';
                } else {
                    alert('‚ùå ' + result.message);
                }
            } catch (error) {
                document.getElementById('loading').style.display = 'none';
                alert('‚ùå Bir hata olu≈ütu: ' + error);
            }
        });

        // Ma√ß Analizi Form Submit
        document.getElementById('macAnalizForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const ev_takim = document.getElementById('ev_takim').value;
            const dep_takim = document.getElementById('dep_takim').value;
            const baraj = document.getElementById('mac_baraj').value;
            
            // Loading g√∂ster
            document.getElementById('macLoading').style.display = 'block';
            document.getElementById('macSonucCard').style.display = 'none';
            
            try {
                const response = await fetch('/api/mac-analiz', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        ev_takim,
                        dep_takim,
                        baraj: baraj || null
                    })
                });
                
                const result = await response.json();
                
                document.getElementById('macLoading').style.display = 'none';
                
                if (result.success) {
                    const data = result.data;
                    
                    // Ba≈ülƒ±k
                    document.getElementById('macBaslik').textContent = `${data.ev_takim} vs ${data.dep_takim}`;
                    document.getElementById('macDetay').textContent = 'Alt/√úst Toplam Skor Analizi';
                    
                    // Tahminler
                    document.getElementById('toplamTahmin').textContent = data.toplam_tahmin.toFixed(1);
                    document.getElementById('ilkYariTahmin').textContent = (data.toplam_tahmin / 2).toFixed(1);
                    document.getElementById('macTempo').textContent = data.ortalama_pace ? data.ortalama_pace.toFixed(1) + ' (' + data.tempo_aciklama + ')' : 'N/A';
                    document.getElementById('stdSapma').textContent = '¬±4.5';
                    
                    // Detay deƒüerler
                    document.getElementById('bazToplam').textContent = data.baz_toplam ? data.baz_toplam.toFixed(1) : 'N/A';
                    document.getElementById('tempoEtkisi').textContent = data.tempo_etki ? (data.tempo_etki >= 0 ? '+' : '') + data.tempo_etki.toFixed(1) : 'N/A';
                    document.getElementById('verimllikEtkisi').textContent = data.verimlilik_etki ? (data.verimlilik_etki >= 0 ? '+' : '') + data.verimlilik_etki.toFixed(1) : 'N/A';
                    document.getElementById('formEtkisi').textContent = data.form_etki ? (data.form_etki >= 0 ? '+' : '') + data.form_etki.toFixed(1) : 'N/A';
                    document.getElementById('shootingEtkisi').textContent = data.shooting_etki ? (data.shooting_etki >= 0 ? '+' : '') + data.shooting_etki.toFixed(1) : 'N/A';
                    document.getElementById('savunmaCezasi').textContent = data.savunma_cezasi ? (data.savunma_cezasi >= 0 ? '+' : '') + data.savunma_cezasi.toFixed(1) : 'N/A';
                    document.getElementById('evAvantaji').textContent = data.ev_avantaj ? '+' + data.ev_avantaj.toFixed(1) : 'N/A';
                    document.getElementById('regresyonEtkisi').textContent = data.regresyon_etki_pct ? data.regresyon_etki_pct : 'N/A';
                    
                    // Takƒ±m adlarƒ±
                    document.getElementById('evTakimAdi').textContent = data.ev_takim || 'Ev Takƒ±mƒ±';
                    document.getElementById('depTakimAdi').textContent = data.dep_takim || 'Deplasman Takƒ±mƒ±';
                    
                    // Ev takƒ±mƒ± detaylarƒ±
                    document.getElementById('evSezonOrt').textContent = data.ev_sezon_ort ? data.ev_sezon_ort.toFixed(1) : 'N/A';
                    document.getElementById('evSon5Ort').textContent = data.ev_son5_ort ? data.ev_son5_ort.toFixed(1) : 'N/A';
                    document.getElementById('evOffRating').textContent = data.ev_off_rating ? data.ev_off_rating.toFixed(1) : 'N/A';
                    document.getElementById('evDefRating').textContent = data.ev_def_rating ? data.ev_def_rating.toFixed(1) : 'N/A';
                    document.getElementById('evFgPct').textContent = data.ev_fg_pct ? data.ev_fg_pct.toFixed(1) + '%' : 'N/A';
                    document.getElementById('ev3pPct').textContent = data.ev_3p_pct ? data.ev_3p_pct.toFixed(1) + '%' : 'N/A';
                    
                    // Deplasman takƒ±mƒ± detaylarƒ±
                    document.getElementById('depSezonOrt').textContent = data.dep_sezon_ort ? data.dep_sezon_ort.toFixed(1) : 'N/A';
                    document.getElementById('depSon5Ort').textContent = data.dep_son5_ort ? data.dep_son5_ort.toFixed(1) : 'N/A';
                    document.getElementById('depOffRating').textContent = data.dep_off_rating ? data.dep_off_rating.toFixed(1) : 'N/A';
                    document.getElementById('depDefRating').textContent = data.dep_def_rating ? data.dep_def_rating.toFixed(1) : 'N/A';
                    document.getElementById('depFgPct').textContent = data.dep_fg_pct ? data.dep_fg_pct.toFixed(1) + '%' : 'N/A';
                    document.getElementById('dep3pPct').textContent = data.dep_3p_pct ? data.dep_3p_pct.toFixed(1) + '%' : 'N/A';
                    
                    // Baraj analizi varsa g√∂ster
                    const barajContainer = document.getElementById('barajSonucContainer');
                    const barajIcerik = document.getElementById('barajSonucIcerik');
                    
                    if (data.karar && data.baraj) {
                        // Risk badge
                        const riskBadge = document.getElementById('macRiskBadge');
                        riskBadge.textContent = data.karar;
                        
                        if (data.risk_seviyesi === 'Ye≈üil') {
                            riskBadge.className = 'risk-badge risk-yesil';
                        } else if (data.risk_seviyesi === 'Sarƒ±') {
                            riskBadge.className = 'risk-badge risk-sari';
                        } else {
                            riskBadge.className = 'risk-badge risk-kirmizi';
                        }
                        
                        // Baraj sonucu detaylarƒ±
                        barajIcerik.innerHTML = `
                            <div style="background: rgba(100, 116, 139, 0.15); padding: 15px 20px; border-radius: 12px; border: 1.5px solid rgba(100, 116, 139, 0.3); margin-bottom: 20px;">
                                <div style="color: #94a3b8; font-size: 13px; font-weight: 600; margin-bottom: 5px;">ü§ñ Sistem √ñnerisi</div>
                                <div style="color: #e2e8f0; font-size: 18px; font-weight: 700;">${data.baraj} <span style="color: ${data.karar === '√úST' ? '#10b981' : data.karar === 'ALT' ? '#ef4444' : '#f59e0b'}">${data.karar}</span></div>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">
                                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 12px; border: 1.5px solid rgba(71, 85, 105, 0.2);">
                                    <div style="color: #64748b; font-size: 12px; font-weight: 600; text-transform: uppercase; margin-bottom: 8px;">Baraj</div>
                                    <div style="color: #e2e8f0; font-size: 24px; font-weight: 700;">${data.baraj}</div>
                                </div>
                                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 12px; border: 1.5px solid rgba(71, 85, 105, 0.2);">
                                    <div style="color: #64748b; font-size: 12px; font-weight: 600; text-transform: uppercase; margin-bottom: 8px;">Tahmin Farkƒ±</div>
                                    <div style="color: ${data.fark > 0 ? '#10b981' : '#ef4444'}; font-size: 24px; font-weight: 700;">${data.fark > 0 ? '+' : ''}${data.fark.toFixed(1)}</div>
                                </div>
                                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 12px; border: 1.5px solid rgba(71, 85, 105, 0.2);">
                                    <div style="color: #64748b; font-size: 12px; font-weight: 600; text-transform: uppercase; margin-bottom: 8px;">G√ºven Seviyesi</div>
                                    <div style="color: #e2e8f0; font-size: 24px; font-weight: 700;">${data.guven_seviyesi}</div>
                                </div>
                            </div>
                            <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 12px; border: 1.5px solid rgba(71, 85, 105, 0.2); margin-bottom: 15px;">
                                <div style="color: #64748b; font-size: 12px; font-weight: 600; text-transform: uppercase; margin-bottom: 12px;">üìä Regresyon Analizi</div>
                                <div style="color: #cbd5e1; font-size: 15px; line-height: 1.8;">
                                    <p style="margin-bottom: 10px;"><strong>Regresyon Etkisi:</strong> ${data.regresyon_etki_pct > 0 ? '+' : ''}${data.regresyon_etki_pct.toFixed(1)}%</p>
                                    <p style="margin-bottom: 10px;"><strong>Tempo:</strong> ${data.tempo_aciklama}</p>
                                    <p>${data.neden}</p>
                                </div>
                            </div>
                            <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 12px; border: 1.5px solid rgba(71, 85, 105, 0.2);">
                                <div style="color: #64748b; font-size: 12px; font-weight: 600; text-transform: uppercase; margin-bottom: 12px;">üí° Detaylƒ± Analiz</div>
                                <div style="color: #cbd5e1; font-size: 15px; line-height: 1.8; white-space: pre-line;">${data.aciklama}</div>
                            </div>
                        `;
                        barajContainer.style.display = 'block';
                    } else {
                        // Baraj girilmemi≈üse basit bilgi g√∂ster
                        document.getElementById('macRiskBadge').textContent = 'üìä Otomatik Analiz';
                        document.getElementById('macRiskBadge').className = 'risk-badge';
                        document.getElementById('macRiskBadge').style.background = 'linear-gradient(135deg, #475569 0%, #64748b 100%)';
                        
                        barajIcerik.innerHTML = `
                            <div style="color: #cbd5e1; font-size: 15px; line-height: 1.8;">
                                <p style="margin-bottom: 15px;">
                                    <strong style="color: #e2e8f0;">Tahmin Edilen Toplam Skor:</strong> ${data.toplam_tahmin.toFixed(1)} (¬±4.5)
                                </p>
                                <p style="color: #94a3b8; font-size: 14px; margin-top: 20px; padding: 15px; background: rgba(15, 23, 42, 0.8); border-radius: 8px; border-left: 3px solid #64748b;">
                                    üí° <strong>ƒ∞pucu:</strong> Baraj girerek detaylƒ± analiz yapabilirsiniz.
                                </p>
                            </div>
                        `;
                        barajContainer.style.display = 'block';
                    }
                    
                    document.getElementById('macSonucCard').style.display = 'block';
                } else {
                    alert('‚ùå ' + result.message);
                }
            } catch (error) {
                document.getElementById('macLoading').style.display = 'none';
                alert('‚ùå Bir hata olu≈ütu: ' + error);
            }
        });
    </script>
</body>
</html>
